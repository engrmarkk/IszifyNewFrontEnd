import{_ as tt}from"./DpAIBldb.js";import{e as et,l as T,r as l,u as st,k as ot,f as lt,c as a,o as n,a as t,j as g,b as c,w as k,t as d,F as U,D as V,z as at,C as nt,d as it,h as M,v as F}from"./Dq_m8wUf.js";import{_ as rt}from"./BlA3aNEd.js";import{_ as dt}from"./C2VRjV9A.js";import{_ as ct}from"./DWSRSFXG.js";import{b as ut,a as pt,_ as mt}from"./BbImofLE.js";import{_ as vt}from"./D10FZT9o.js";import{L as xt}from"./lrz6IDt1.js";import{_ as ft}from"./DlLbvac0.js";import{e as _t}from"./B--8QcvO.js";const gt={class:"h-screen px-5 md:px-10 pt-20 md:t-24 bg-accent-tint"},ht={class:"flex flex-col md:flex-row md:items-center justify-between"},bt={class:"flex justify-between md:justify-start items-center gap-5"},yt={class:"flex gap-3 self-end md:items-center mt-5"},wt={class:"border text-xs md:text-sm rounded flex justify-between items-center bg-white w-[150px] px-3 py-1.5 md:py-2 font-bold"},kt={class:"capitalize"},Lt={class:"shadow bg-white w-[150px] rounded-md"},Ct=["onClick"],St={class:"py-2 px-3 font-medium capitalize"},$t={class:"h-[600px] overflow-y-scroll"},jt={key:0,class:"min-h-[500px] flex justify-center items-center"},zt={key:1,class:"min-h-[500px]"},Et={class:"flex flex-col md:flex-row justify-between my-5 p-5 md:p-10 bg-white rounded-md"},Tt={class:"flex gap-5"},Ut={class:"h-[40px] w-[40px] border p-2 rounded-full flex justify-between items-center"},Vt=["src","onError","alt"],Mt={class:"space-y-1"},Ft=["onClick"],Nt={class:"text-accent flex"},Bt={class:"flex gap-2 items-center font-bold text-base md:text-lg text-teal"},Dt={class:"flex gap-5 self-end md:self-start mt-5"},Rt=["onClick"],Ot=["onClick"],Ht=["onClick"],qt={key:0,class:"fixed z-50 inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4"},It={class:"relative top-20 mx-auto shadow-xl rounded-md bg-white md:max-w-[70%] p-5 pb-5 md:pb-10"},Pt={class:"w-[80%] mx-auto"},At={class:"pt-10"},Gt={class:"space-y-4"},Jt={class:"text-black-shades text-sm md:text-base"},Kt={class:"space-y-4 pt-10"},Qt={key:0,class:"flex items-center gap-5"},Wt={class:""},Xt={key:1,class:"flex items-center gap-2"},Yt={class:"w-full"},Zt=["value"],te={class:"w-full"},ee={class:"space-y-4 pt-5"},se={class:"mt-10 flex justify-end"},oe={key:0},le={key:1,class:"fixed z-50 inset-0 bg-gray-900 bg-opacity-60 overflow-y-auto h-full w-full px-4"},ae={class:"rounded w-full px-3 mx-auto flex items-center h-full justify-center"},ne={class:"rounded-md bg-white md:max-w-[50%] pt-5 pb-5 md:pb-10"},ie={key:2,class:"flex justify-end px-5 mt-2"},re={class:"example-one"},ye=et({__name:"index",setup(de){const{$axiosHelper:L}=T(),{$auth:N}=T(),C=N.session.value.access_token,m=l(!1),u=l(1),S=l({}),h=l(5),B=l(0),b=l(0),p=l(!1),$=l(!1),y=l(!1),w=l(!1),v=st(),D=ot(),R=l("Share your Iszzly Link"),j=l([]),i=l({}),z=l({}),O=l("active"),H=l(["active","hidden"]),q="?"+new URLSearchParams(S.value).toString(),x=async()=>{var e,f,_,o;m.value=!0;const s=await L.get(`url_shortener/short_urls${q}&page=${u.value}&per_page=${h.value}`,C);s.error?(console.log(s.error.message),m.value=!1):(m.value=!1,j.value=s.data.data,u.value=(e=s==null?void 0:s.data)==null?void 0:e.page,h.value=(f=s==null?void 0:s.data)==null?void 0:f.per_page,B.value=(_=s==null?void 0:s.data)==null?void 0:_.total_pages,b.value=(o=s==null?void 0:s.data)==null?void 0:o.total_items)};x();const I=async s=>{p.value=!0;const e=await L.patch(`url_shortener/short_url/${s.id}`,{title:s.title,short_link:s.short_link},C);e!=null&&e.error?e!=null&&e.error&&(v.error("network error"),p.value=!1):(p.value=!1,v.success(e.error.message),E(),x()),p.value=!1},P=s=>{S.value.status=s,x()},A=s=>{w.value=!0,i.value=s},E=()=>{w.value=!1},G=()=>{$.value=!0},J=s=>{try{return`${new URL(s).origin}/favicon.ico`}catch(e){return console.log("Invalid URL",e),"/icons/website.svg"}},K=(s,e)=>{s.target.src="/icons/website.svg",console.log(`Favicon not found for: ${e.url}`)},Q=s=>{navigator.clipboard.writeText(s.short_url).then(()=>{v.success("Short link copied to clipboard!")}).catch(e=>{v.error("Failed to copy: ",e)})},W=s=>{y.value=!0,z.value=s},X=()=>{y.value=!1},Y=s=>{D.push(`links/${s}`)},Z=async()=>{x(),u.value=1};return(s,e)=>{const f=tt,_=lt("vue-awesome-paginate");return n(),a("section",gt,[t("div",ht,[t("div",bt,[c(vt,{title:"My Links",subTitle:""}),c(f,{to:"/user/links/new"},{default:k(()=>e[4]||(e[4]=[t("button",{class:"btn-green-sm py-2 text-xs md:text-sm px-1 pr-3 flex items-center"},[t("img",{src:rt,alt:""}),t("span",null," Create Link")],-1)])),_:1})]),t("div",yt,[e[6]||(e[6]=t("div",null,[t("button",{class:"border px-5 rounded text-xs md:text-sm py-2 btnn-sm-outline border-accent text-accent"}," Export ")],-1)),t("div",null,[c(at(_t),null,{content:k(()=>[t("div",Lt,[(n(!0),a(U,null,V(H.value,(o,r)=>(n(),a("div",{onClick:ce=>P(o),key:r,class:"cursor-pointer hover:bg-accent-tint"},[t("p",St,d(o),1)],8,Ct))),128))])]),default:k(()=>[t("div",wt,[t("p",kt,"Status: "+d(O.value),1),e[5]||(e[5]=t("div",{class:"h-[20px] w-[20px]"},[t("img",{src:dt,alt:""})],-1))])]),_:1})])])]),t("section",$t,[m.value?(n(),a("div",jt,e[7]||(e[7]=[t("div",null,[t("img",{src:ct,alt:""})],-1)]))):(n(),a("div",zt,[(n(!0),a(U,null,V(j.value,o=>(n(),a("div",{key:o.id},[t("div",Et,[t("div",Tt,[t("div",Ut,[t("img",{src:J(o.url),class:"h-full w-full",onError:r=>K(r,o),alt:o==null?void 0:o.title},null,40,Vt)]),t("div",Mt,[t("h1",{onClick:r=>Y(o==null?void 0:o.id),class:"text-xl capitalize font-extrabold text-black hover:text-accent cursor-pointer"},d(o==null?void 0:o.title),9,Ft),t("p",Nt,d(o==null?void 0:o.url),1),t("p",Bt,d(o==null?void 0:o.short_url),1),e[8]||(e[8]=nt('<div class="flex gap-10 pt-5"><div class="flex gap-2 items-center"><img src="'+pt+'" alt="" class="h-[16px] w-[16px]"><p class="p-1 bg-accent-tint text-xs rounded text-accent font-medium"> Click data </p></div><div class="flex gap-2 text-xs sm:text-sm items-center text-black"><img src="'+mt+'" alt="" class="h-[16px] w-[16px]"> Sep 9, 2024 </div></div>',1))])]),t("div",Dt,[t("div",{onClick:r=>A(o),class:"p-2 hover:bg-accent-tint cursor-pointer rounded border border-accent-shades"},e[9]||(e[9]=[t("ion-icon",{name:"create-outline",class:"text-black-tint",size:"small"},null,-1)]),8,Rt),t("div",{onClick:r=>Q(o),class:"p-2 hover:bg-accent-tint cursor-pointer rounded border border-accent-shades"},e[10]||(e[10]=[t("ion-icon",{name:"copy-outline",class:"text-black-tint",size:"small"},null,-1)]),8,Ot),t("div",{onClick:r=>W(o),class:"p-2 hover:bg-accent-tint cursor-pointer rounded border border-accent-shades font-semibold flex gap-2 items-center"},e[11]||(e[11]=[t("ion-icon",{name:"share-social-outline",class:"text-black-tint",size:"small"},null,-1)]),8,Ht)])])]))),128))]))]),w.value?(n(),a("div",qt,[t("div",It,[t("div",{class:"flex justify-end p-2"},[t("button",{onClick:E,type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"},e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),t("div",Pt,[e[19]||(e[19]=t("h2",{class:"text-xl lg:text-2xl font-bold text-black uppercase"}," Edit Link ",-1)),t("div",At,[t("div",Gt,[e[13]||(e[13]=t("h3",{class:"font-bold"},"Destination URL",-1)),t("p",Jt,d(i.value.url),1)]),t("div",Kt,[e[16]||(e[16]=t("h3",{class:"font-bold"},"Short Link",-1)),$.value?(n(),a("div",Xt,[t("div",Yt,[t("input",{type:"text",value:i.value.host_url,class:"v-input bg-accent-tint"},null,8,Zt)]),e[15]||(e[15]=it(" / ")),t("div",te,[M(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.value.short_link=o),class:"v-input text-black-shades"},null,512),[[F,i.value.short_link]])])])):(n(),a("div",Qt,[t("p",Wt,d(i.value.short_url),1),t("div",{onClick:G,class:"flex items-center gap-1 border py-2 cursor-pointer hover:bg-accent-tint rounded-md px-5 text-info font-semibold text-sm md:text-base"},e[14]||(e[14]=[t("div",{class:"w-[14px]"},[t("img",{src:ut,alt:"",class:"object-cover"})],-1),t("p",null,"Edit",-1)]))]))])]),e[20]||(e[20]=t("div",{class:"pt-10 font-bold text-black text-lg md:text-xl"}," Other details (Optional) ",-1)),t("div",ee,[e[17]||(e[17]=t("h3",{class:"font-bold"},"Title",-1)),M(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>i.value.title=o),class:"v-input capitalize text-black-shades"},null,512),[[F,i.value.title]])]),t("div",se,[t("button",{onClick:e[2]||(e[2]=o=>I(i.value)),class:"btn-green-sm py-2 text-xs md:text-sm px-3 flex gap-1 items-center"},[p.value?(n(),a("span",oe,[c(xt)])):g("",!0),e[18]||(e[18]=t("span",null," Update Link",-1))])])])])])):g("",!0),y.value?(n(),a("section",le,[t("div",ae,[t("div",ne,[t("div",{class:"flex justify-end p-2"},[t("button",{onClick:X,type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center"},e[21]||(e[21]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),c(ft,{urlToShare:z.value,headerTitle:R.value},null,8,["urlToShare","headerTitle"])])])])):g("",!0),b.value>=5?(n(),a("div",ie,[t("div",re,[c(_,{"total-items":b.value,"items-per-page":h.value,"max-pages-shown":5,modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),onClick:Z},null,8,["total-items","items-per-page","modelValue"])])])):g("",!0)])}}});export{ye as default};
